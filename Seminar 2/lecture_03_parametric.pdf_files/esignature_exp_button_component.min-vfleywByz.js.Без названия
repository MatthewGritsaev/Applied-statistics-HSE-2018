define(["require","exports","tslib","external/react","spectrum/button","esignature_prototype/experiment/esignature_exp_modal","esignature_prototype/experiment/esignature_thank_you_modal","modules/constants/file_viewer","esignature_prototype/logger/esignature_exp_logger","modules/clean/file_store/utils","esignature_prototype/constants"],function(e,t,n,o,a,i,r,l,s,u,p){"use strict";function d(){return c()!==p.Variant.Off}function c(){var e=l.ESIGNATURE_AB_TESTING_BASIC,t=l.ESIGNATURE_AB_TESTING_PLUS;return e===p.Variant.Off?t:e}function g(e){return"pdf"===u.getExtension(e)&&d()}Object.defineProperty(t,"__esModule",{value:!0});var E;(function(e){e[e.None=0]="None",e[e.Variant=1]="Variant",e[e.ThankYou=2]="ThankYou"})(E=t.ModalState||(t.ModalState={})),t.esignatureTestingEnabled=d,t.esignatureTestingVariant=c,t.canSendForSignature=g;var f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={openModal:E.None},t.logEvent=function(e){var n=t.props,o=n.clickOrigin,a=n.file,i=n.user,r=l.ESIGNATURE_AB_TESTING_BASIC===p.Variant.Off?l.ESIGNATURE_AB_TESTING_PLUS===p.Variant.Off?p.ExperimentUserType.Undefined:p.ExperimentUserType.Plus:p.ExperimentUserType.Basic;s.logESignatureAB({clickOrigin:o,event:e,file:a,user:i,userType:r,variant:c()})},t.closeVariantModal=function(){t.logEvent(p.ExperimentEvent.ClickedOutOfFirstModal),t.toggleVariantModal()},t.toggleVariantModal=function(){t.setState({openModal:t.state.openModal===E.Variant?E.None:E.Variant})},t.closeThankYouModal=function(){t.logEvent(p.ExperimentEvent.ClickedOutOfSecondModal),t.toggleThankModal()},t.toggleThankModal=function(){t.setState({openModal:t.state.openModal===E.ThankYou?E.None:E.ThankYou})},t.handleClick=function(e){t.toggleVariantModal(),e.stopPropagation(),t.logEvent(p.ExperimentEvent.ButtonClicked)},t.handleInterestedClick=function(e){t.toggleVariantModal(),t.toggleThankModal(),t.logEvent(p.ExperimentEvent.UserInterested)},t}return n.__extends(t,e),Object.defineProperty(t.prototype,"variantModalOpen",{get:function(){return this.state.openModal===E.Variant},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thankModalOpen",{get:function(){return this.state.openModal===E.ThankYou},enumerable:!0,configurable:!0}),t.prototype.componentDidMount=function(){d()&&this.logEvent(this.props.clickOrigin===p.ExperimentClickOrigin.Browse?p.ExperimentEvent.LoadedBrowsePage:p.ExperimentEvent.LoadedFileViewer)},t.prototype.componentDidUpdate=function(e){e.hidden===!0&&e.hidden!==this.props.hidden&&this.props.clickOrigin===p.ExperimentClickOrigin.Browse&&this.logEvent(p.ExperimentEvent.ButtonSeenInBrowse)},t.prototype.render=function(){if(!g(this.props.file))return null;var e=this.props.hidden;return o.createElement("div",null,o.createElement(i.ESignatureExpModal,{handleFooterClick:this.handleInterestedClick,open:this.variantModalOpen,onRequestClose:this.closeVariantModal,variant:c()}),o.createElement(r.ESignatureThankYouModal,{handleButtonClick:this.toggleThankModal,logEvent:this.logEvent,open:this.thankModalOpen,onRequestClose:this.closeThankYouModal}),o.createElement(a.Button,{"aria-label":"Prepare for signature",className:"inline-share-button",onClick:this.handleClick,variant:e?"invisible":"secondary",style:{margin:"0 0 0 8px"}},"Prepare for signature"))},t})(o.Component);t.ESignatureExpButtonComponent=f});
//# sourceMappingURL=esignature_exp_button_component.min.js-vflSjptfq.map